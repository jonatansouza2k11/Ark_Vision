<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>{% block title %}Ark System{% endblock %}</title>

  <link href="https://cdn.jsdelivr.net/npm/daisyui@5/dist/full.min.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'dark-bg': '#1a202c',
            'dark-card': '#2d3748',
            'dark-border': '#4a5568',
            'accent-blue': '#4299e1',
            'accent-cyan': '#0bc5ea',
          }
        }
      }
    };

    function changeTheme(theme, themeName) {
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      localStorage.setItem('themeName', themeName);

      const themeLabel = document.getElementById('current-theme');
      if (themeLabel) themeLabel.textContent = themeName;
    }

    window.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme') || 'dark';
      const savedThemeName = localStorage.getItem('themeName') || 'Dark';

      document.documentElement.setAttribute('data-theme', savedTheme);

      const themeLabel = document.getElementById('current-theme');
      if (themeLabel) themeLabel.textContent = savedThemeName;
    });
  </script>

  <style>
    body {
      background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .glow-blue { box-shadow: 0 0 20px rgba(66, 153, 225, 0.3); }
    .card-hover { transition: all 0.3s ease; }
    .card-hover:hover { transform: translateY(-2px); }

    .glass-card {
      background: rgba(45, 55, 72, 0.7) !important;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(66, 153, 225, 0.3);
    }

    .neon-border {
      box-shadow: 0 0 10px #4299e1, 0 0 20px #4299e1;
      border: 2px solid #4299e1;
    }

    .bg-base-100 {
      background-color: rgba(45, 55, 72, 0.95) !important;
    }

    #app-sidebar.is-collapsed { width: 4rem; }
    #app-sidebar.is-collapsed .sidebar-label { display: none; }
  </style>

  {% block extra_head %}{% endblock %}
</head>

<body class="min-h-screen text-gray-100" data-theme="cyberpunk">

  <div class="flex h-screen overflow-hidden">
    {% include 'sidebar.html' %}
    <main class="flex-1 overflow-y-auto">
      {% block page_content %}{% endblock %}
    </main>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function initSidebarCollapseToggle() {
      const sidebar = document.getElementById('app-sidebar');
      const btn = document.getElementById('sidebar-toggle');
      const icon = document.getElementById('sidebar-toggle-icon');
      if (!sidebar || !btn) return;

      const KEY = "ark_sidebar_collapsed";

      function apply(collapsed) {
        sidebar.classList.toggle('is-collapsed', collapsed);
        if (icon) icon.textContent = collapsed ? "⟩⟩" : "⟨⟨";
        try { localStorage.setItem(KEY, collapsed ? "1" : "0"); } catch (e) {}
      }

      let collapsed = false;
      try { collapsed = localStorage.getItem(KEY) === "1"; } catch (e) {}
      apply(collapsed);

      btn.addEventListener('click', () => apply(!sidebar.classList.contains('is-collapsed')));
    });
  </script>

</body>
</html>
