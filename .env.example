# üîê ARK YOLO System - Environment Configuration
# ============================================
# IMPORTANTE: Rename this file to .env and fill with your actual values
# NUNCA fa√ßa commit do arquivo .env (est√° no .gitignore)
# Este arquivo .env.example √© apenas um template de refer√™ncia


# ============================================
# FLASK CONFIGURATION
# ============================================

# Secret key para session encryption
# CRITICAL: Generate a secure random key before using in production!
# Command: python -c "import secrets; print(secrets.token_hex(32))"
# Example output: a3f8b9c2e1d4f7a6b8c9d0e1f2a3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e9f0a1
FLASK_SECRET_KEY=your-secret-key-here-minimum-32-characters

# Flask environment
FLASK_ENV=production
FLASK_DEBUG=false

# Server configuration
FLASK_HOST=0.0.0.0
FLASK_PORT=5000


# ============================================
# DATABASE CONFIGURATION
# ============================================

# SQLite database path (relativo ao projeto)
DATABASE_PATH=cv_system.db


# ============================================
# YOLO CONFIGURATION
# ============================================

# Path to YOLO model file
YOLO_MODEL_PATH=yolo_models/yolov8n.pt

# Video source (0 for webcam, RTSP URL, or HTTP URL)
VIDEO_SOURCE=0

# Default confidence threshold (0.0-1.0)
# Higher = fewer false positives, Lower = more detections
YOLO_CONF_THRESHOLD=0.87

# Default target width for resizing (320, 480, 640, 960, 1280)
# Lower = faster processing, Higher = better accuracy
# Recommended: 640 (low-end), 960 (balanced), 1280 (high-end)
YOLO_TARGET_WIDTH=960

# Default frame step (process every N-th frame)
# 1 = every frame (slowest, most accurate)
# 2 = every 2nd frame (balanced) - RECOMMENDED
# 3-4 = every 3rd-4th frame (fastest, may miss fast movements)
YOLO_FRAME_STEP=2


# ============================================
# TRACKER CONFIGURATION
# ============================================

# Tracking algorithm (botsort.yaml or bytetrack.yaml)
# botsort: Better ID preservation (99.3% MOTA), slightly slower - RECOMMENDED
# bytetrack: Faster (up to 30% faster), good for high FPS scenarios (>30 FPS)
TRACKER=botsort.yaml


# ============================================
# CAMERA CONFIGURATION
# ============================================

# Camera resolution settings
# Adjust based on your camera capabilities and system RAM
# Low-end:  640x480   (~300K pixels, ~200-400 MB RAM)
# Balanced: 960x540   (~500K pixels, ~400-700 MB RAM) - RECOMMENDED
# High-end: 1280x720  (~900K pixels, ~600-1000 MB RAM)
# Ultra:    1920x1080 (~2M pixels,   ~1000-2000 MB RAM)
CAM_WIDTH=960
CAM_HEIGHT=540

# Camera FPS (frames per second)
# Higher values = smoother video but more processing
# 15 fps = minimal for surveillance
# 20 fps = acceptable for most scenarios
# 30 fps = standard smooth video - RECOMMENDED
# 60 fps = ultra smooth (usually overkill for surveillance)
CAM_FPS=30


# ============================================
# MEMORY MANAGEMENT CONFIGURATION
# ============================================
# ‚ú® Controles de gerenciamento de mem√≥ria para prevenir memory leaks

# Video buffer size (number of frames kept in memory before alert)
# Lower = less RAM usage, less pre-recording context
# Higher = more RAM usage, better video quality before alert
# 10 frames @30fps = ~0.3s of buffer (~15-25 MB RAM) - minimum
# 20 frames @30fps = ~0.7s of buffer (~30-50 MB RAM) - low-end
# 40 frames @30fps = ~1.3s of buffer (~60-100 MB RAM) - RECOMMENDED
# 60 frames @30fps = ~2.0s of buffer (~90-150 MB RAM) - high-end
BUFFER_SIZE=40

# Garbage collection interval (frames)
# How often Python cleans up unused memory
# Lower = more frequent cleanup (less RAM, slight CPU overhead)
# Higher = less frequent cleanup (more RAM, better CPU efficiency)
# 20 = aggressive (recommended if RAM < 4GB or memory issues)
# 30 = moderate (good for 4GB RAM systems)
# 50 = balanced (recommended for most systems with 4-8GB RAM) - RECOMMENDED
# 75 = relaxed (recommended if RAM > 8GB)
GC_INTERVAL=50

# Memory warning threshold (MB)
# System will force garbage collection + PyTorch cache cleanup when exceeding this value
# ‚ö†Ô∏è IMPORTANTE: Escolha baseado na RAM total do seu sistema
# 512 MB  = conservative (frequent warnings, use if RAM < 4GB)
# 1024 MB = balanced (1 GB, good for 4-8GB RAM) - RECOMMENDED
# 1536 MB = relaxed (1.5 GB, for high-res setups with 8GB+ RAM)
# 2048 MB = permissive (2 GB, only for powerful systems with 16GB+ RAM)
MEMORY_WARNING_THRESHOLD=1024


# ============================================
# INTELLIGENT ZONES CONFIGURATION
# ============================================

# NOTA: As zonas inteligentes s√£o configuradas via dashboard web (/settings)
# As vari√°veis abaixo s√£o valores PADR√ÉO GLOBAIS aplicados quando voc√™ cria novas zonas
# Cada zona pode ter seus pr√≥prios valores personalizados

# Safe zone (configurado via dashboard - formato JSON de m√∫ltiplas zonas)
# Deixe vazio para configurar via interface web
# Exemplo avan√ßado: [{"name":"Entrada","mode":"FLOW","points":[[0.3,0.1],[0.7,0.1],[0.7,0.9],[0.3,0.9]]}]
SAFE_ZONE=[]

# DEFAULT: Maximum seconds outside zone before alert
# Usado como padr√£o para novas zonas (pode ser sobrescrito por zona)
MAX_OUT_TIME=60

# DEFAULT: Email cooldown (seconds between alerts for same person)
# Current recommendation: 600s = 10 minutes (prevents email spam)
# Usado como padr√£o para novas zonas (pode ser sobrescrito por zona)
EMAIL_COOLDOWN=600

# DEFAULT: Buffer seconds for pre-recording before alert
# Captura v√≠deo X segundos antes do evento de alerta
BUFFER_SECONDS=2

# DEFAULT: Zone empty timeout (seconds)
# Tempo que a zona pode ficar vazia antes de disparar alerta (modo OCCUPANCY)
ZONE_EMPTY_TIMEOUT=10

# DEFAULT: Zone full timeout (seconds)
# Tempo que a zona pode ficar cheia antes de disparar alerta (modo OCCUPANCY)
ZONE_FULL_TIMEOUT=20

# DEFAULT: Zone full threshold (number of people)
# Quantas pessoas definem "zona cheia" (modo OCCUPANCY)
ZONE_FULL_THRESHOLD=5


# ============================================
# EMAIL CONFIGURATION (Gmail SMTP)
# ============================================

# Gmail sender email (example: myapp@gmail.com)
EMAIL_SENDER=your-email@gmail.com

# Gmail App Password (NOT regular password!)
# Generate at: https://myaccount.google.com/apppasswords
# IMPORTANT: Use 16-character app password, NOT your regular Gmail password
EMAIL_APP_PASSWORD=your-16-char-gmail-app-password-here

# SMTP server configuration (for Gmail use: smtp.gmail.com)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true

# Email recipients (comma-separated for multiple recipients)
# Example single: alerts@company.com
# Example multiple: alerts@company.com,admin@company.com,security@company.com
EMAIL_RECIPIENTS=recipient@gmail.com


# ============================================
# LOGGING CONFIGURATION
# ============================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log file path
LOG_FILE=logs/ark_yolo.log


# ============================================
# SECURITY CONFIGURATION
# ============================================

# Password hashing rounds (higher = slower but more secure)
PASSWORD_HASH_ROUNDS=10

# Session timeout (minutes)
# Production: 1440 (24h) | High-security: 60 (1h) | Testing: 30
SESSION_TIMEOUT=1440

# Enable CORS (for development only!)
CORS_ENABLED=false


# ============================================
# PERFORMANCE CONFIGURATION
# ============================================

# Use GPU if available (true/false)
# Auto-detects CUDA/ROCm if set to true
# ‚ö†Ô∏è Set to false if you don't have NVIDIA GPU or CUDA installed
USE_GPU=true

# Number of worker threads for Flask
# 2-4 = recommended for most systems
# 8+ = high-concurrency environments (production servers)
WORKER_THREADS=4

# Maximum concurrent frame processing
# 1 = sequential processing (safest, slowest)
# 2 = dual processing (balanced) - RECOMMENDED
# 4+ = high parallelism (requires powerful CPU/GPU)
MAX_CONCURRENT_FRAMES=2


# ============================================
# DEVELOPMENT CONFIGURATION
# ============================================

# Enable debug mode (NUNCA em produ√ß√£o!)
DEBUG_MODE=false

# Enable detailed error messages
VERBOSE_ERRORS=false

# Enable test mode (uses mock data)
TEST_MODE=false


# ============================================
# OPTIONAL: IP CAMERA CONFIGURATION
# ============================================

# If using IP camera with authentication
CAMERA_USERNAME=admin
CAMERA_PASSWORD=camera-password

# Camera URL examples:
# RTSP: rtsp://user:pass@192.168.1.100:554/stream
# HTTP: http://192.168.1.100:8080/video
# Uncomment and modify as needed:
# VIDEO_SOURCE=rtsp://admin:password@192.168.1.100:554/stream


# ============================================
# üéØ PRESETS: SYSTEM PROFILES
# ============================================

# Descomente UM dos presets abaixo para configurar rapidamente para seu hardware
# ‚ö†Ô∏è Se usar preset, comente as configura√ß√µes individuais acima para evitar conflito

# ---- PRESET: LOW-END SYSTEM (< 4GB RAM, no GPU) ----
# Recomendado se: voc√™ tem memory errors frequentes, RAM < 4GB, CPU antigo
# CAM_WIDTH=640
# CAM_HEIGHT=480
# CAM_FPS=20
# YOLO_TARGET_WIDTH=480
# YOLO_FRAME_STEP=3
# BUFFER_SIZE=20
# GC_INTERVAL=30
# MEMORY_WARNING_THRESHOLD=512

# ---- PRESET: BALANCED SYSTEM (4-8GB RAM, integrated GPU) ----
# Recomendado se: RAM 4-8GB, GPU integrada ou CPU moderno, uso geral - DEFAULT
# CAM_WIDTH=960
# CAM_HEIGHT=540
# CAM_FPS=30
# YOLO_TARGET_WIDTH=960
# YOLO_FRAME_STEP=2
# BUFFER_SIZE=40
# GC_INTERVAL=50
# MEMORY_WARNING_THRESHOLD=1024

# ---- PRESET: HIGH-END SYSTEM (8GB+ RAM, dedicated GPU) ----
# Recomendado se: RAM 8-16GB, GPU dedicada (GTX/RTX), qualidade priorit√°ria
# CAM_WIDTH=1280
# CAM_HEIGHT=720
# CAM_FPS=30
# YOLO_TARGET_WIDTH=1280
# YOLO_FRAME_STEP=1
# BUFFER_SIZE=60
# GC_INTERVAL=75
# MEMORY_WARNING_THRESHOLD=1536
# USE_GPU=true

# ---- PRESET: ULTRA SYSTEM (16GB+ RAM, RTX GPU, high-res IP cam) ----
# Recomendado se: RAM 16GB+, GPU RTX 3060+, c√¢mera IP 4K, servidor dedicado
# CAM_WIDTH=1920
# CAM_HEIGHT=1080
# CAM_FPS=30
# YOLO_TARGET_WIDTH=1280
# YOLO_FRAME_STEP=1
# BUFFER_SIZE=90
# GC_INTERVAL=100
# MEMORY_WARNING_THRESHOLD=2048
# USE_GPU=true
