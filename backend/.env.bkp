# ============================================
# ðŸš€ ARK YOLO FASTAPI - ENVIRONMENT CONFIG
# ============================================
# Ãšltima atualizaÃ§Ã£o: 2025-12-31
# IntegraÃ§Ã£o: PostgreSQL + YOLO + FastAPI + RAG
# ============================================



# ============================================
# APP CONFIG
# ============================================
APP_NAME=ARK YOLO FastAPI
ENVIRONMENT=development
DEBUG=true
HOST=0.0.0.0
PORT=8000



# ============================================
# SECURITY & AUTH
# python generate_secret.py
# ============================================
SECRET_KEY=XzOioe9uIaxGwQxQyNEuQvhDBtSKqiSSLVVLKyB39Bs
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080



# ============================================
# DATABASE - POSTGRESQL
# ============================================
#DATABASE_URL=postgresql://postgres:postgres@localhost:5432/ark_yolo
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/ark_yolo
DB_ECHO=false

# PostgreSQL Extensions (for RAG)
ENABLE_PGVECTOR=false  # Set to true when pgvector is installed



# ============================================
# ðŸ¤– RAG CONFIGURATION
# ============================================

# OpenAI Configuration (for embeddings + LLM)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.7

# Alternative: Ollama (local LLM)
OLLAMA_ENABLED=false
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.2

# RAG Settings
RAG_ENABLED=false  # Enable when ready to use RAG
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200
RAG_TOP_K=5  # Number of results to retrieve
RAG_SIMILARITY_THRESHOLD=0.7

# Vector Store
VECTOR_STORE_TYPE=pgvector  # Options: pgvector, chroma, faiss
CHROMA_PERSIST_DIRECTORY=./data/chroma  # If using Chroma



# ============================================
# YOLO MODEL CONFIG
# ============================================
YOLO_MODEL_PATH=backend/yolo_models/yolov8n.pt
YOLO_CONF_THRESHOLD=0.87
YOLO_TARGET_WIDTH=960
YOLO_FRAME_STEP=1
TRACKER=botsort.yaml



# ============================================
# VIDEO SOURCE CONFIG
# ============================================
# Webcam: 0, 1, 2, etc
# RTSP: rtsp://user:pass@ip:port/stream
# HTTP: http://ip:port/video
VIDEO_SOURCE=0



# ============================================
# CAMERA SETTINGS
# ============================================
CAM_WIDTH=960
CAM_HEIGHT=540
CAM_FPS=30



# ============================================
# MEMORY MANAGEMENT
# ============================================
# Buffer size (frames): ~1.33s @ 30fps
BUFFER_SIZE=40
BUFFER_DURATION_SECONDS=1.33

# Garbage collection interval (frames)
GC_INTERVAL=50

# Memory warning threshold (MB)
MEMORY_WARNING_THRESHOLD=1024



# ============================================
# PERFORMANCE PRESET
# ============================================
# Options: LOW_END, BALANCED, HIGH_END, ULTRA
ACTIVE_PRESET=BALANCED



# ============================================
# ZONE DETECTION CONFIG
# ============================================
# Safe zones (JSON format - managed via database)
SAFE_ZONE=[]

# Alert thresholds
MAX_OUT_TIME=5.0
EMAIL_COOLDOWN=10.0

# Buffer for video recording
BUFFER_SECONDS=2.0

# Zone monitoring
ZONE_EMPTY_TIMEOUT=15.0
ZONE_FULL_TIMEOUT=20.0
ZONE_FULL_THRESHOLD=5



# ============================================
# EMAIL NOTIFICATIONS
# ============================================
# Gmail SMTP settings
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587

# Email credentials
EMAIL_SENDER=jonatandj2k14@gmail.com
EMAIL_APP_PASSWORD=isozasiyvtxvmpcb

# TLS/SSL settings (1=enabled, 0=disabled)
EMAIL_USE_TLS=1
EMAIL_USE_SSL=0

# Compatibility (FastAPI uses bool)
SMTP_USE_TLS=true



# ============================================
# CORS (Frontend origins)
# ============================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:5000,http://127.0.0.1:5000


# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_FILE=logs/ark_yolo.log

# RAG-specific logging
RAG_LOG_QUERIES=true  # Log all RAG queries for debugging
RAG_LOG_RESPONSES=false  # Log RAG responses (may be verbose)



# ============================================
# GPU CONFIG
# ============================================
USE_GPU=true
CUDA_VISIBLE_DEVICES=0

# GPU for embeddings/LLM (if different from YOLO)
RAG_USE_GPU=false
RAG_GPU_DEVICE=cuda:0



# ============================================
# ðŸ¤– CONVERSATION & MEMORY
# ============================================
# Conversation settings
CONVERSATION_MAX_HISTORY=50  # Max messages to keep in memory
CONVERSATION_TIMEOUT_MINUTES=30  # Session timeout

# Memory settings for RAG
MEMORY_TYPE=buffer  # Options: buffer, summary, entity
MEMORY_MAX_TOKENS=2000



# ============================================
# ADVANCED RAG SETTINGS
# ============================================
# Reranking (for better results)
RERANK_ENABLED=false
RERANK_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2

# Hybrid search (combine vector + keyword)
HYBRID_SEARCH_ENABLED=false
HYBRID_SEARCH_ALPHA=0.5  # 0=full keyword, 1=full vector

# Multi-query retrieval
MULTI_QUERY_ENABLED=false
MULTI_QUERY_COUNT=3



# ============================================
# NOTES
# ============================================
# - SECRET_KEY: CHANGE IN PRODUCTION!
# - DATABASE_URL: Update password if different
# - EMAIL_APP_PASSWORD: Gmail App Password (not regular password)
# - VIDEO_SOURCE: 0 for webcam, RTSP URL for IP camera
# - SAFE_ZONE: Managed via database (don't edit manually)
# 
# ðŸ¤– RAG SETUP STEPS:
# 1. Install pgvector: CREATE EXTENSION vector;
# 2. Set OPENAI_API_KEY or enable OLLAMA
# 3. Set RAG_ENABLED=true
# 4. Set ENABLE_PGVECTOR=true
# 5. Run migrations to add vector columns
